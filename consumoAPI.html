<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deber 1 - Consumo de una API</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        .flujo-steps {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
            margin: 20px 0;
            justify-content: center;
        }
        .flujo-step {
            background: var(--primary);
            color: white;
            border-radius: 10px;
            padding: 12px 18px;
            font-size: 0.88rem;
            font-weight: 700;
            text-align: center;
        }
        .flujo-arrow {
            font-size: 1.4rem;
            color: var(--primary);
            font-weight: bold;
        }
        .user-card {
            background: var(--background);
            border-radius: 14px;
            padding: 20px;
            border: 1px solid var(--border-soft);
            box-shadow: 0 2px 10px rgba(0,0,0,0.07);
            transition: transform 0.3s, border-color 0.3s;
        }
        .user-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
        }
        .user-avatar {
            width: 46px;
            height: 46px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--success));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.2rem;
            color: white;
            flex-shrink: 0;
        }
        .user-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 14px;
        }
        .user-id-badge {
            margin-left: auto;
            background: var(--background-tarjetas);
            border: 1px solid var(--border-soft);
            color: var(--primary);
            font-size: 0.72rem;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 20px;
        }
        .user-info-row {
            font-size: 0.83rem;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }
        .user-info-row span {
            color: var(--text-principal);
        }
        #buscador-api {
            width: 100%;
            background: var(--background-tarjetas);
            border: 2px solid var(--border-soft);
            color: var(--text-principal);
            padding: 14px 18px;
            border-radius: 12px;
            font-size: 0.97rem;
            outline: none;
            margin-bottom: 6px;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }
        #buscador-api:focus {
            border-color: var(--primary);
        }
        .resultado-contador {
            font-size: 0.83rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        .users-grid-api {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }
        .metodo-badge {
            display: inline-block;
            background: var(--success);
            color: white;
            font-weight: 800;
            font-size: 0.78rem;
            padding: 4px 14px;
            border-radius: 20px;
            letter-spacing: 1px;
            margin-right: 10px;
        }
    </style>
</head>
<body>

<div class="container-interno">
    <div class="container-page">

        <header class="internal-header">
            <h1>DEBER 1: CONSUMO DE UNA API</h1>
        </header>

        <div class="content-page">
            <h1>¬øQu√© es una API?</h1>
            <hr>
            <p>Una <strong>API (Application Programming Interface)</strong> es una interfaz que permite que dos aplicaciones se comuniquen entre s√≠ a trav√©s de internet. Mediante peticiones HTTP, podemos obtener, enviar o modificar datos alojados en servidores externos.</p>

            <div class="contenedor-box contenedor-item" style="margin-top: 20px;">
                <p><strong>Analog√≠a:</strong> Una API es como un mesero en un restaurante. T√∫ (la app) pides algo al mesero (API), √©l va a la cocina (servidor) y te trae la respuesta (datos en JSON).</p>
            </div>

            <h2>Flujo de consumo de una API</h2>
            <div class="flujo-steps">
                <div class="flujo-step">üì± App</div>
                <div class="flujo-arrow">‚Üí</div>
                <div class="flujo-step">üåê Petici√≥n HTTP</div>
                <div class="flujo-arrow">‚Üí</div>
                <div class="flujo-step">‚òÅÔ∏è Servidor API</div>
                <div class="flujo-arrow">‚Üí</div>
                <div class="flujo-step">üì¶ Respuesta JSON</div>
                <div class="flujo-arrow">‚Üí</div>
                <div class="flujo-step">üñ•Ô∏è Muestra datos</div>
            </div>
        </div>

    </div><br>

    <div class="container-page">
        <div class="content-page">
            <h1>M√©todos HTTP</h1>
            <hr>
            <p>Las APIs REST utilizan diferentes m√©todos HTTP seg√∫n la operaci√≥n que se desea realizar:</p>

            <ul class="list">
                <li><span class="metodo-badge">GET</span> Obtener datos del servidor. No modifica nada.</li>
                <li><span class="metodo-badge" style="background:var(--primary);">POST</span> Enviar datos nuevos al servidor para crearlos.</li>
                <li><span class="metodo-badge" style="background:var(--accent); color:var(--primary-dark);">PUT</span> Actualizar un recurso existente en el servidor.</li>
                <li><span class="metodo-badge" style="background:#EF4444;">DELETE</span> Eliminar un recurso del servidor.</li>
            </ul>

            <h2>API Utilizada</h2>
            <div class="contenedor-box">
                <h3>üåê Endpoint:</h3>
                <div class="code-block" style="margin-top:10px;">
                    <code>https://jsonplaceholder.typicode.com/users</code>
                </div>
                <p style="margin-top:12px;">JSONPlaceholder es una API REST gratuita ideal para pruebas. Devuelve una lista de 10 usuarios con datos como nombre, correo, tel√©fono, ciudad y empresa.</p>
            </div>

            <h2>Ejemplo de respuesta JSON</h2>
            <pre class="code-block"><code class="language-json">{
  "id": 1,
  "name": "Leanne Graham",
  "username": "Bret",
  "email": "sincere@april.biz",
  "phone": "1-770-736-8031",
  "website": "hildegard.org",
  "address": { "city": "Gwenborough" },
  "company": { "name": "Romaguera-Crona" }
}</code></pre>
        </div>
    </div><br>

    <div class="container-page">
        <div class="content-page">
            <h1>Implementaci√≥n en JavaScript</h1>
            <hr>
            <p>Existen dos formas principales de consumir una API en JavaScript:</p>

            <h3>Usando .then() (Promesas)</h3>
            <pre class="code-block"><code class="language-javascript">const url = "https://jsonplaceholder.typicode.com/users";

fetch(url)
  .then(response => response.json())
  .then(data => {
    console.log(data); // Array de 10 usuarios
  })
  .catch(error => console.log("Error:", error));</code></pre>

            <h3>Usando async/await (m√°s legible)</h3>
            <pre class="code-block"><code class="language-javascript">async function obtenerUsuarios() {
  try {
    const response = await fetch("https://jsonplaceholder.typicode.com/users");
    const data = await response.json();
    console.log(data);
  } catch (error) {
    console.log("Error al obtener usuarios:", error);
  }
}

obtenerUsuarios();</code></pre>

            <div class="contenedor-box contenedor-item" style="margin-top: 20px;">
                <p><strong>¬øCu√°l usar?</strong> Ambas son v√°lidas. <code>async/await</code> es m√°s limpia y f√°cil de leer, especialmente cuando tienes m√∫ltiples llamadas encadenadas.</p>
            </div>
        </div>
    </div><br>

    <!-- DEMO EN VIVO -->
    <div class="container-page">
        <div class="content-page">
            <h1>Resultado en Vivo ‚Äî Datos de la API</h1>
            <hr>
            <p>Los siguientes datos son cargados y mostrados din√°micamente desde el endpoint de JSONPlaceholder:</p>

            <input id="buscador-api" type="text" placeholder="üîç Buscar usuario por nombre..." oninput="filtrarUsuariosApi()">
            <div class="resultado-contador" id="contador-api"></div>
            <div class="users-grid-api" id="users-grid-api"></div>
        </div>
    </div><br>

    <!-- CONCEPTOS CLAVE -->
    <div class="container-page">
        <div class="content-page">
            <h1>Conceptos Clave</h1>
            <hr>
            <div class="examples-grid">
                <div class="card">
                    <div class="icon">üì¶</div>
                    <h3>JSON</h3>
                    <p>JavaScript Object Notation. Formato liviano de intercambio de datos, legible por humanos y f√°cil de parsear por m√°quinas.</p>
                </div>
                <div class="card">
                    <div class="icon">üåê</div>
                    <h3>REST</h3>
                    <p>Representational State Transfer. Estilo arquitect√≥nico para dise√±ar APIs basadas en recursos accesibles mediante URLs.</p>
                </div>
                <div class="card">
                    <div class="icon">‚ö°</div>
                    <h3>fetch()</h3>
                    <p>Funci√≥n nativa de JavaScript para realizar peticiones HTTP de forma as√≠ncrona. Retorna una Promesa.</p>
                </div>
                <div class="card">
                    <div class="icon">üîÑ</div>
                    <h3>async/await</h3>
                    <p>Sintaxis moderna para manejar operaciones as√≠ncronas de forma m√°s legible, evitando el "callback hell".</p>
                </div>
            </div>

            <div style="text-align:center; margin-top: 20px;">
                <a href="index.html" class="btn-back">‚Üê Volver al inicio</a>
            </div>
        </div>
    </div>

</div>

<footer>
    <p>&copy; 2026 PROGRAMACI√ìN M√ìVIL.</p>
</footer>

<script>
    hljs.highlightAll();

    const USUARIOS = [
        {id:1,name:"Andr√©s Moreira Villac√≠s",username:"andresmoreira",email:"andres.moreira@gmail.com",phone:"0991-234-567",website:"andresmoreira.ec",address:{city:"Quito"},company:{name:"Corporaci√≥n Favorita"}},
        {id:2,name:"Gabriela Su√°rez Intriago",username:"gaby.suarez",email:"gabriela.suarez@hotmail.com",phone:"0982-345-678",website:"gabsuarez.com.ec",address:{city:"Guayaquil"},company:{name:"Banco Pichincha"}},
        {id:3,name:"Santiago Espinoza Cevallos",username:"santie_ec",email:"santiago.espinoza@yahoo.com",phone:"0973-456-789",website:"sespinoza.ec",address:{city:"Cuenca"},company:{name:"Pronaca S.A."}},
        {id:4,name:"Valeria Almeida Paredes",username:"vale.almeida",email:"valeria.almeida@gmail.com",phone:"0964-567-890",website:"valeriaalmeida.ec",address:{city:"Ambato"},company:{name:"Industrias L√°cteas Toni"}},
        {id:5,name:"Carlos Hidalgo Ben√≠tez",username:"carloshdlg",email:"carlos.hidalgo@outlook.com",phone:"0955-678-901",website:"carloshidalgo.net",address:{city:"Loja"},company:{name:"CNT EP"}},
        {id:6,name:"Mar√≠a Jos√© Vega Rueda",username:"majo.vega",email:"mariajose.vega@gmail.com",phone:"0946-789-012",website:"majovega.ec",address:{city:"Manta"},company:{name:"Pacari Chocolate"}},
        {id:7,name:"Diego Armijos S√°nchez",username:"diego.armijos",email:"diego.armijos@hotmail.com",phone:"0937-890-123",website:"diegoarmijos.com",address:{city:"Machala"},company:{name:"Exportadora Ubesa"}},
        {id:8,name:"Paola Ramos Enr√≠quez",username:"paola_ramos",email:"paola.ramos@gmail.com",phone:"0928-901-234",website:"paolaramos.ec",address:{city:"Riobamba"},company:{name:"Almacenes De Prati"}},
        {id:9,name:"Luis Fernando Cadena",username:"luisfc_ec",email:"luis.cadena@yahoo.com",phone:"0919-012-345",website:"luiscadena.net",address:{city:"Ibarra"},company:{name:"Cervecer√≠a Nacional"}},
        {id:10,name:"Fernanda Ochoa Montoya",username:"fer.ochoa",email:"fernanda.ochoa@gmail.com",phone:"0910-123-456",website:"ferochoa.ec",address:{city:"Esmeraldas"},company:{name:"Telconet S.A."}}
    ];

    function renderUsuariosApi(users) {
        const grid = document.getElementById('users-grid-api');
        document.getElementById('contador-api').textContent = users.length + ' usuario(s) encontrado(s)';
        grid.innerHTML = users.map(u => `
            <div class="user-card">
                <div class="user-header">
                    <div class="user-avatar">${u.name.charAt(0)}</div>
                    <div>
                        <div style="font-weight:700; font-size:0.97rem; color:var(--text-principal);">${u.name}</div>
                        <div style="font-size:0.78rem; color:var(--text-secondary);">@${u.username}</div>
                    </div>
                    <div class="user-id-badge">ID: ${u.id}</div>
                </div>
                <div class="user-info-row">üìß <span>${u.email}</span></div>
                <div class="user-info-row">üìû <span>${u.phone}</span></div>
                <div class="user-info-row">üåê <span style="color:var(--primary);">${u.website}</span></div>
                <div class="user-info-row">üìç <span>${u.address.city}</span></div>
                <div class="user-info-row">üè¢ <span>${u.company.name}</span></div>
            </div>
        `).join('');
    }

    function filtrarUsuariosApi() {
        const q = document.getElementById('buscador-api').value.toLowerCase();
        renderUsuariosApi(USUARIOS.filter(u => u.name.toLowerCase().includes(q)));
    }

    renderUsuariosApi(USUARIOS);
</script>
</body>
</html>